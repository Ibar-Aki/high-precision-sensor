# 共通モジュール運用方針（table-level 観点）

作成日時: 2026-02-24 17:41:18 +09:00
作成者: Codex＋GPT-5
更新日: 2026-02-24

## 1. 背景

`High Precision Tilt Sensor` と `Table Level Guide` は同種の数値処理を持つため、重複実装を減らして回帰リスクを下げる。

## 2. 第一段の共通化対象

1. `shared/js/KalmanFilter1D.js`
   - 両アプリの1Dカルマンフィルタ実装を統合
2. 各アプリ側ラッパー
   - `assets/js/modules/KalmanFilter1D.js`
   - `table-level/assets/js/kalman.js`
   - 既存 import 互換を保つため、上記2ファイルは `shared` から再エクスポートする

## 3. 運用ルール

1. 共通化対象は `shared/js/` に配置する。
2. 既存アプリ側 API 名を維持し、呼び出し側変更を最小化する。
3. 共通モジュール変更時は、両アプリのユニットテストとE2Eを必ず実行する。
4. 互換性に影響する変更は、先にドキュメントへ記載してから実装する。

## 4. 次段候補

1. 静止判定ユーティリティ（分散計算・リングバッファ処理）
2. 設定サニタイズ共通ヘルパー
3. 方向ラベルや角度フォーマットの共通化
