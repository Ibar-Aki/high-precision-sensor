# 机水平ガイド テストガイド

作成日時: 2026-02-24 17:41:18 +09:00
作成者: Codex＋GPT-5
更新日: 2026-02-24

## 1. 自動テスト

1. ユニットテスト（共通）
   - `npm test -- --run`
2. table-level E2E スモーク
   - `npm run test:e2e:table-level`

## 2. table-level E2E の検証項目

1. Service Worker キャッシュの成立
2. 自動確定フロー（`measuring` 到達）
3. 手動確定フロー（タイムアウト後）
4. オフライン起動

## 3. 手動確認チェック

1. `センサーを有効化` から計測開始まで遷移できる
2. `measurement-mode` が `active -> locking -> measuring` に遷移する
3. 再計測後、必要に応じて `手動確定` ボタンが表示される
4. 設定保存後、再読み込みして値が復元される

## 4. 障害時の切り分け

1. センサー値が入らない場合
   - Safari のモーションアクセス設定を確認する
2. オフライン起動しない場合
   - `table-level/sw.js` のキャッシュバージョンと登録状態を確認する
3. 設定が保存されない場合
   - `localStorage` の容量制限、プライベートブラウズ設定を確認する
